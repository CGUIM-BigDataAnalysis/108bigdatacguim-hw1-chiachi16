108-2 大數據分析方法 作業一
================
何家齊

搞不清楚各行各業的薪資差異嗎? 念研究所到底對第一份工作的薪資影響有多大? CP值高嗎? 透過分析**初任人員平均經常性薪資**-
（107年）<https://data.gov.tw/dataset/6647>
（104-105年）<http://ipgod.nchc.org.tw/dataset/a17000000j-020066>
，可初步了解台灣近幾年各行各業、各學歷的起薪。

## 比較104年度和107年度大學畢業者的薪資資料

### 資料匯入與處理

``` r
library(jsonlite)
library(dplyr)
library(purrr)  
library(readr)
# 讀檔案
X107_1 <- read_csv("C:/Users/user/Downloads/A17000000J-020066-Qod/107_1.csv")
X104_1 <- read_csv("C:/Users/user/Downloads/104_2.csv")

# 整理資料
X104_1$大職業別<-gsub("、","_",X104_1$大職業別)
X104_1$大職業別<-gsub("部門","",X104_1$大職業別)
X104_1$大職業別<-gsub("營造業","營建工程",X104_1$大職業別)
X104_1$大職業別<-gsub("資訊及通訊傳播業","出版、影音製作、傳播及資通訊服務業",X104_1$大職業別)
X104_1$大職業別<-gsub("教育服務業","教育業",X104_1$大職業別)
X104_1$大職業別<-gsub("醫療保健服務業","醫療保健業",X104_1$大職業別)
test<-which(X104_1$`經常性薪資-女/男`=="…")

#合併104&107年資料
table1<-full_join(X104_1,X107_1,by="大職業別")

#新增欄位大學薪資比率
names<-colnames(table1)
names<-gsub("-","",names)
names<-gsub("x","104",names)
names<-gsub("y","107",names)
colnames(table1)<-names
table1$大學薪資.107<-gsub("—|…",0,table1$大學薪資.107)
table1$大學薪資.104<-gsub("—|…",0,table1$大學薪資.104)
table1$大學薪資.107<-as.numeric(table1$大學薪資.107)
table1$大學薪資.104<-as.numeric(table1$大學薪資.104)
table1$大學薪資比率<-table1$大學薪資.107/table1$大學薪資.104
table1<-table1[order(table1$大學薪資比率,decreasing = T),]
```

### 107年度薪資較104年度薪資高的職業有哪些?

以下為前十個薪資漲幅最高的職業(位)，其中以教育業占最多

``` r
  head(table1[table1$大學薪資比率>1,"大職業別"],10)
```

| 大職業別                   |
| :--------------------- |
| 專業\_科學及技術服務業-服務及銷售工作人員 |
| 教育業-服務及銷售工作人員          |
| 不動產業-技術員及助理專業人員        |
| 住宿及餐飲業-服務及銷售工作人員       |
| 藝術\_娛樂及休閒服務業-事務支援人員    |
| 金融及保險業-技藝\_機械設備操作及組裝人員 |
| 教育業                    |
| 教育業-事務支援人員             |
| 用水供應及污染整治業-專業人員        |
| 教育業-專業人員               |

### 提高超過5%的的職業有哪些?

``` r
table1[table1$大學薪資比率>1.05,"大職業別"]
```

107年有53個職業薪水較104年成長超過5%

| 大職業別                         |
| :--------------------------- |
| 專業\_科學及技術服務業-服務及銷售工作人員       |
| 教育業-服務及銷售工作人員                |
| 不動產業-技術員及助理專業人員              |
| 住宿及餐飲業-服務及銷售工作人員             |
| 藝術\_娛樂及休閒服務業-事務支援人員          |
| 金融及保險業-技藝\_機械設備操作及組裝人員       |
| 教育業                          |
| 教育業-事務支援人員                   |
| 用水供應及污染整治業-專業人員              |
| 教育業-專業人員                     |
| 出版、影音製作、傳播及資通訊服務業-專業人員       |
| 住宿及餐飲業                       |
| 用水供應及污染整治業-技藝\_機械設備操作及組裝人員   |
| 營建工程-服務及銷售工作人員               |
| 電力及燃氣供應業-技藝\_機械設備操作及組裝人員     |
| 住宿及餐飲業-事務支援人員                |
| 運輸及倉儲業-技術員及助理專業人員            |
| 服務業-服務及銷售工作人員                |
| 金融及保險業-技術員及助理專業人員            |
| 金融及保險業-服務及銷售工作人員             |
| 出版、影音製作、傳播及資通訊服務業-事務支援人員     |
| 工業及服務業-服務及銷售工作人員             |
| 不動產業                         |
| 運輸及倉儲業-技藝\_機械設備操作及組裝人員       |
| 不動產業-技藝\_機械設備操作及組裝人員         |
| 住宿及餐飲業-技藝\_機械設備操作及組裝人員       |
| 不動產業-服務及銷售工作人員               |
| 支援服務業-服務及銷售工作人員              |
| 營建工程-專業人員                    |
| 出版、影音製作、傳播及資通訊服務業            |
| 運輸及倉儲業-事務支援人員                |
| 藝術\_娛樂及休閒服務業                 |
| 醫療保健業-服務及銷售工作人員              |
| 其他服務業-服務及銷售工作人員              |
| 營建工程-事務支援人員                  |
| 藝術\_娛樂及休閒服務業-專業人員            |
| 運輸及倉儲業                       |
| 藝術\_娛樂及休閒服務業-技藝\_機械設備操作及組裝人員 |
| 製造業-技術員及助理專業人員               |
| 運輸及倉儲業-服務及銷售工作人員             |
| 金融及保險業                       |
| 工業-技術員及助理專業人員                |
| 不動產業-事務支援人員                  |
| 金融及保險業-專業人員                  |
| 批發及零售業-服務及銷售工作人員             |
| 製造業-專業人員                     |
| 出版、影音製作、傳播及資通訊服務業-服務及銷售工作人員  |
| 出版、影音製作、傳播及資通訊服務業-技術員及助理專業人員 |
| 工業-專業人員                      |
| 用水供應及污染整治業                   |
| 藝術\_娛樂及休閒服務業-技術員及助理專業人員      |
| 營建工程                         |
| 工業-技藝\_機械設備操作及組裝人員           |

### 主要的職業種別是哪些種類呢?

``` r
#主要職業別
Q1<-table1[table1$大學薪資比率>1.05,"大職業別"]
Q1<-c(Q1)
Q1<-strsplit(Q1$大職業別,"-")
get_job<-function(x){
  return(Q1[[x]][1])
}
Q1<-map(c(1:53),get_job)%>%as.matrix()
```

| 職業                | 次數 |
| :---------------- | :-: |
| 不動產業              | 5  |
| 出版、影音製作、傳播及資通訊服務業 | 5  |
| 金融及保險業            | 5  |
| 運輸及倉儲業            | 5  |
| 藝術\_娛樂及休閒服務業      | 5  |
| 住宿及餐飲業            | 4  |
| 教育業               | 4  |
| 營建工程              | 4  |
| 工業                | 3  |
| 用水供應及污染整治業        | 3  |
| 製造業               | 2  |
| 工業及服務業            | 1  |
| 支援服務業             | 1  |
| 批發及零售業            | 1  |
| 其他服務業             | 1  |
| 服務業               | 1  |
| 專業\_科學及技術服務業      | 1  |
| 電力及燃氣供應業          | 1  |
| 醫療保健業             | 1  |
| <br>              |    |

## 男女同工不同酬現況分析

男女同工不同酬一直是性別平等中很重要的問題，分析資料來源為104到107年度的大學畢業薪資。

### 104和107年度的大學畢業薪資資料，哪些行業男生薪資比女生薪資多?

``` r
#資料處理
Q2_104<-data.frame(table1$大職業別,table1$`大學女/男.104`)
colnames(Q2_104)<-c("大職業別","大學女/男.104")
Q2_107<-data.frame(table1$大職業別,table1$`大學女/男.107`)
colnames(Q2_107)<-c("大職業別","大學女/男.107")
Q2_104$`大學女/男.104`<-gsub("—|…",0,Q2_104$`大學女/男.104`)
Q2_107$`大學女/男.107`<-gsub("—|…",0,Q2_107$`大學女/男.107`)
Q2_104$`大學女/男.104`<-as.numeric(Q2_104$`大學女/男.104`)
Q2_107$`大學女/男.107`<-as.numeric(Q2_107$`大學女/男.107`)
Q2_104<-Q2_104[order(Q2_104$`大學女/男.104`,decreasing = F),]
Q2_107<-Q2_107[order(Q2_107$`大學女/男.107`,decreasing = F),]
Q2_104<-Q2_104[Q2_104$`大學女/男.104`!=0,]
Q2_107<-Q2_107[Q2_107$`大學女/男.107`!=0,]
```

<br> 104年男生薪資大於女生薪資

| 大職業別                       | 大學女/男.104 |
| :------------------------- | :-------: |
| 電力及燃氣供應業-技藝\_機械設備操作及組裝人員   |   91.69   |
| 教育業-服務及銷售工作人員              |   91.90   |
| 礦業及土石採取業-技術員及助理專業人員        |   92.42   |
| 礦業及土石採取業-技藝\_機械設備操作及組裝人員   |   93.10   |
| 礦業及土石採取業                   |   95.28   |
| 其他服務業-事務支援人員               |   95.47   |
| 營建工程-技藝\_機械設備操作及組裝人員       |   95.64   |
| 用水供應及污染整治業-技藝\_機械設備操作及組裝人員 |   95.90   |
| 營建工程                       |   96.35   |
| 教育業                        |   96.44   |

<br> 107年男生薪資大於女生薪資

| 大職業別                 | 大學女/男.107 |
| :------------------- | :-------: |
| 礦業及土石採取業-專業人員        |   96.02   |
| 電力及燃氣供應業-事務支援人員      |   96.96   |
| 礦業及土石採取業             |   97.11   |
| 營建工程                 |   97.52   |
| 教育業-事務支援人員           |   97.61   |
| 電力及燃氣供應業-服務及銷售工作人員   |   97.73   |
| 營建工程-技術員及助理專業人員      |   97.78   |
| 用水供應及污染整治業-專業人員      |   97.81   |
| 用水供應及污染整治業-服務及銷售工作人員 |   97.94   |
| 營建工程-事務支援人員          |   98.23   |

<br> \#\#\# 哪些行業女生薪資比男生薪資多?

104年 專業\_科學及技術服務業-技藝\_機械設備操作及組裝人員的女性薪資較男性薪資高

``` r
Q2_104[Q2_104$`大學女/男.104`>100,]
```

| 大職業別                         | 大學女/男.104 |
| :--------------------------- | :-------: |
| 專業\_科學及技術服務業-技藝\_機械設備操作及組裝人員 |  100.26   |

## 研究所薪資差異

以107年度的資料來看，哪個職業別念研究所最划算呢 (研究所學歷薪資與大學學歷薪資增加比例最多)?

``` r
#資料處理
Q3_107<-data.frame(table1$大職業別,table1$大學薪資.107,table1$研究所薪資)
colnames(Q3_107)<-c("大職業別","大學薪資","研究所薪資")
Q3_107$研究所薪資<-gsub("—|…",0,Q3_107$研究所薪資)%>%as.numeric()
Q3_107$大學薪資<-gsub("—|…",0,Q3_107$大學薪資)%>%as.numeric()
Q3_107$薪資比率<-Q3_107$研究所薪資/Q3_107$大學薪資
Q3_107<-Q3_107[order(Q3_107$薪資比率,decreasing = T),]
```

有其他服務業、專業、教育業、出版、影音製作、傳播及資通訊服務業、製造業、工業、及服務業

| 大職業別                   | 大學薪資  | 研究所薪資 |   薪資比率   |
| :--------------------- | :---: | :---: | :------: |
| 其他服務業                  | 25781 | 31909 | 1.237694 |
| 專業\_科學及技術服務業           | 29353 | 35381 | 1.205362 |
| 專業\_科學及技術服務業-專業人員      | 32460 | 39103 | 1.204652 |
| 教育業-事務支援人員             | 25908 | 30827 | 1.189864 |
| 出版、影音製作、傳播及資通訊服務業      | 29143 | 34503 | 1.183921 |
| 其他服務業-事務支援人員           | 26115 | 30830 | 1.180548 |
| 出版、影音製作、傳播及資通訊服務業-專業人員 | 31763 | 37479 | 1.179958 |
| 製造業                    | 28777 | 33916 | 1.178580 |
| 工業                     | 28850 | 33893 | 1.174801 |
| 工業及服務業                 | 28849 | 33880 | 1.174391 |

## 我有興趣的職業別薪資狀況分析

以下整理我有興趣的醫療保健業薪資

### 有興趣的職業別篩選，呈現薪資

``` r
#資料處理
Q4<-data.frame(table1$大職業別,table1$大學薪資.107,table1$研究所薪資)
Q4<-Q4[grep("醫療保健業-*",Q4$table1.大職業別),]
colnames(Q4)<-c("大職業別","大學薪資","研究所薪資")
Q4$研究所薪資<-gsub("—|…",0,Q4$研究所薪資)%>%as.numeric()
Q4$大學薪資<-gsub("—|…",0,Q4$大學薪資)%>%as.numeric()
```

### 這些職業別研究所薪資與大學薪資差多少呢？

``` r
Q4$薪資差異<-Q4$研究所薪資-Q4$大學薪資
```

| 大職業別             | 大學薪資  | 研究所薪資 | 薪資差異 |
| :--------------- | :---: | :---: | :--: |
| 醫療保健業-技術員及助理專業人員 | 30556 | 33798 | 3242 |
| 醫療保健業-事務支援人員     | 26177 | 29573 | 3396 |
| 醫療保健業            | 29590 | 34436 | 4846 |
| 醫療保健業-專業人員       | 34270 | 38677 | 4407 |
| 醫療保健業-基層技術工及勞力工  |   0   |   0   |  0   |

不會因為薪資就改變想念研究所，因為大學學的還不夠
